!function(){var e=document.querySelector(".burger"),t=document.querySelector(".hidden"),n=document.querySelector(".cross");e.addEventListener("click",function(e){t.style.display="block",t.style.zIndex="1",t.style.overflow="hidden"}),n.addEventListener("click",function(e){t.style.display="none"}),t.addEventListener("click",e=>{e.preventDefault(),e.target.classList.contains("hidden__link")&&(t.style.display="none")})}(),function(){const o=e=>{var t=e.find(".menu__content"),n=t.find(".menu__content-utero"),o=(e=>{let t=524;var n=$(window).width(),e=e.closest(".menu__accord").find(".menu__item-title"),o=e.width()*e.length,a=(console.log(o),window.matchMedia("(max-width: 720px)").matches),i=window.matchMedia("(max-width: 480px)").matches;return a&&(t=n-o),t=i?n-e.width():t})(e);e.addClass("menu__item--active"),t.width(o),n.width(o)},a=e=>{var e=e.find(".menu__item"),t=e.find(".menu__content");e.removeClass("menu__item--active"),t.width(0)};$(".menu__item-title").on("click",e=>{e.preventDefault();var e=$(e.currentTarget),t=e.closest(".menu__item"),n=t.hasClass("menu__item--active"),e=e.closest(".menu__accord");n?a(e):(a(e),o(t))})}(),function(){let o;ymaps.ready(()=>{o=new ymaps.Map("map-block",{center:[54.509805,36.274478],zoom:16.92,controls:[]});for(var e=[[54.509525,36.273786]],t=new ymaps.GeoObjectCollection({},{type:"Point",draggable:!1,iconLayout:"default#image",iconImageSize:[30,38]}),n=0;n<e.length;n++)t.add(new ymaps.Placemark(e[n]));o.geoObjects.add(t),o.behaviors.disable("scrollZoom")})}(),$(".reviews__user").on("click",e=>{var n,e=$(e.currentTarget),t=e.attr("data-open"),t=(n=t,$(".reviews__content").filter((e,t)=>$(t).attr("data-open-with")==n));e.addClass("user-active").siblings().removeClass("user-active"),t.addClass("active").siblings().removeClass("active")}),function(){const o=$(".section"),n=$(".maincontent");o.first().addClass("active");var e=new MobileDetect(window.navigator.userAgent).mobile();let a=!1;const i=e=>{var t;!1===a&&(a=!0,t=-100*e,n.css({transform:`translateY(${t}%)`}),o.eq(e).addClass("active").siblings().removeClass("active"),$(".fixed__item").eq(e).addClass("fixed__item--active").siblings().removeClass("fixed__item--active"),setTimeout(()=>{a=!1},1300))},l=e=>{var t=o.filter(".active"),n=t.next(),t=t.prev();"next"===e&&n.length&&i(n.index()),"prev"===e&&t.length&&i(t.index())};$(window).on("wheel",e=>{e=e.originalEvent.deltaY;0<e&&l("next"),e<0&&l("prev")}),$(window).on("keydown",e=>{console.log(e.keyCode);var t=e.target.tagName.toLowerCase();if("input"!==t&&"textarea"!==t)switch(e.keyCode){case 38:l("prev");break;case 40:l("next")}}),$("[data-scroll-to]").on("click",e=>{e.preventDefault();e=$(e.currentTarget).attr("data-scroll-to"),e=$(`[data-section-id=${e}]`);console.log(e.index()),i(e.index())}),$(".wrapper").on("touchMove",e=>e.preventDefault()),e&&$("body").swipe({swipe:function(e,t){"up"===t&&l("next"),"down"===t&&l("prev")}})}(),function(){const t=$(".products__items").bxSlider({pager:!1,controls:!1});$(".products__control--left").click(e=>{e.preventDefault(),t.goToPrevSlide()}),$(".products__control--right").click(e=>{e.preventDefault(),t.goToNextSlide()})}(),function(){const o=e=>{var t=$(e).find(".team__item-drop");e.find(".team__item").removeClass("isActive"),$(t).height(0)};$(".team__item-title").on("click",e=>{var t,e=$(e.currentTarget),n=e.closest(".team__items");e.closest(".team__item").hasClass("isActive")?o(n):(o(n),n=e,n=$(n).closest(".team__item"),e=$(n).find(".team__item-drop"),t=$(n).find(".team__item-content"),t=$(t).height(),n.addClass("isActive"),$(e).height(t))})}(),function(){const r=document.getElementById("form");function d(e){if(e.checkValidity())return e.nextElementSibling.textContent="",1;e.nextElementSibling.textContent=e.validationMessage}sendBtn.addEventListener("click",e=>{if(e.preventDefault(),console.log("form1",r),function(e){let t=!0;d(e.elements.name)||(t=!1);d(e.elements.phone)||(t=!1);d(e.elements.comment)||(t=!1);d(e.elements.street)||(t=!1);d(e.elements.house)||(t=!1);d(e.elements.corpus)||(t=!1);d(e.elements.apartment)||(t=!1);d(e.elements.floor)||(t=!1);return t}(r)){console.log("ок");const r=$("#form");var e=r.find("[name = 'name']"),t=r.find("[name = 'phone']"),n=r.find("[name = 'street']"),o=r.find("[name = 'house']"),a=r.find("[name = 'corpus']"),i=r.find("[name = 'apartment']"),l=r.find("[name = 'floor']"),s=r.find("[name='to']"),c=r.find("[name='comment']");$.ajax({url:"https://webdev-api.loftschool.com/sendmail",method:"post",data:{name:e.val(),phone:t.val(),street:n.val(),house:o.val(),corpus:a.val(),apartment:i.val(),floor:l.val(),to:s.val(),comment:c.val()},success:e=>{console.log(e),$(".modal__text").text(e.message),$("#modal").css("overflow","hidden"),$.fancybox.open({src:"#modal",type:"inline"})},error:e=>{console.log(e),$(".modal__text").text("Произошла ошибка, попробуйте позже"),$.fancybox.open({src:"#modal",type:"inline"})}})}}),$(".app-close-modal").on("click",()=>{$.fancybox.close()})}(),function(){let a,i,l,s,c;document.addEventListener("DOMContentLoaded",e=>{a=document.getElementById("video"),l=document.getElementById("durationLevel"),s=document.getElementById("soundLevel"),i=document.querySelectorAll(".play"),s.addEventListener("click",o),s.addEventListener("mouseup",o),l.value=0,l.min=0,l.max=Math.round(a.duration),l.addEventListener("input",n);for(let e=0;e<i.length;e++)i[e].addEventListener("click",()=>{document.querySelector(".play-btn").classList.toggle("play-btn--active"),a.paused?(a.play(),c=setInterval(t,1e3/66)):(a.pause(),clearInterval(c))});function t(){l.value=a.currentTime}function n(){a.currentTime=l.value,c=setInterval(t,1e3/66)}function o(){a.volume=s.value/10}document.getElementById("micLevel").addEventListener("click",function(){0===a.volume?(a.volume=s).value=10*s:(s=a.volume,a.volume=0,s.value=0)})})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1cmdlci5qcyIsImhvcml6b250YWwuanMiLCJtYXAuanMiLCJyZXZpZXdzLmpzIiwic2Nyb2xsLmpzIiwic2xpZGVyLmpzIiwidGVhbS5qcyIsInZhbGlkYXRpb24uanMiLCJ2aWRlby5qcyJdLCJuYW1lcyI6WyJidXJnZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJoaWRkZW4iLCJjbG9zZUNyb3NzIiwiYWRkRXZlbnRMaXN0ZW5lciIsImV2ZW50Iiwic3R5bGUiLCJkaXNwbGF5IiwiekluZGV4Iiwib3ZlcmZsb3ciLCJlIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsIml0ZW1PcGVuIiwiaXRlbUNvbnRlbnQiLCJpdGVtIiwiZmluZCIsImNvbnRlbnRUZXh0Qm94IiwicmVxV2lkdGgiLCJsZXQiLCJ3aWR0aCIsInNjcmVlbldpZHRoIiwiJCIsIndpbmRvdyIsInRpdGxlc0Jsb2NrcyIsImNsb3Nlc3QiLCJ0aXRsZVdpZHRoIiwibGVuZ3RoIiwiaXNUYWJsZXQiLCJjb25zb2xlIiwibG9nIiwibWF0Y2hNZWRpYSIsIm1hdGNoZXMiLCJpc1Bob25lIiwiYWRkQ2xhc3MiLCJjbG9zZUV2ZXJ5SXRlbSIsIm1lbnVJdGVtcyIsImNvbnRhaW5lciIsIml0ZW1zQ29udGVudCIsInJlbW92ZUNsYXNzIiwib24iLCIkdGhpcyIsImN1cnJlbnRUYXJnZXQiLCJpdGVtT3BlbmVkIiwiaGFzQ2xhc3MiLCJteU1hcCIsInltYXBzIiwicmVhZHkiLCJNYXAiLCJjZW50ZXIiLCJ6b29tIiwiY29udHJvbHMiLCJjb29yZHMiLCJteUNvbGxlY3Rpb24iLCJHZW9PYmplY3RDb2xsZWN0aW9uIiwidHlwZSIsImRyYWdnYWJsZSIsImljb25MYXlvdXQiLCJpY29uSW1hZ2VTaXplIiwiaSIsImFkZCIsIlBsYWNlbWFyayIsImdlb09iamVjdHMiLCJiZWhhdmlvcnMiLCJkaXNhYmxlIiwiYXR0ciIsInNob3dJdGVtIiwiZmlsdGVyIiwibmR4IiwiYWxpYXMiLCJzaWJsaW5ncyIsInNlY3Rpb25zIiwiZmlyc3QiLCJpc01vYmlsZSIsIk1vYmlsZURldGVjdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsIm1vYmlsZSIsImluU2Nyb2xsIiwicGVyZm9ybVRyYW5zaXRpb24iLCJwb3NpdGlvbiIsInNlY3Rpb25FcSIsImNzcyIsInRyYW5zZm9ybSIsImVxIiwic2V0VGltZW91dCIsInNjcm9sbFZpZXdwb3J0IiwiYWN0aXZlU2VjdGlvbiIsIm5leHRTZWN0aW9uIiwibmV4dCIsInByZXZTZWN0aW9uIiwicHJldiIsImRpcmVjdGlvbiIsImluZGV4IiwiZGVsdGFZIiwib3JpZ2luYWxFdmVudCIsImtleUNvZGUiLCJ0YWdOYW1lIiwidG9Mb3dlckNhc2UiLCJyZXFTZWN0aW9uIiwic3dpcGUiLCJzbGlkZXIiLCJieFNsaWRlciIsInBhZ2VyIiwiY2xpY2siLCJnb1RvUHJldlNsaWRlIiwiZ29Ub05leHRTbGlkZSIsImNsb3NlQWxsIiwiYWxsQmxvY2tzIiwiaGVpZ2h0IiwiZHJvcENvbnRlbnQiLCJjbG9zZVNpYmxpbmdzIiwiZHJvcEVsZW0iLCJjdXJIZWlnaHQiLCJmb3JtIiwiZ2V0RWxlbWVudEJ5SWQiLCJ2YWxpZGF0ZUZpZWxkIiwiZmllbGQiLCJjaGVja1ZhbGlkaXR5IiwibmV4dEVsZW1lbnRTaWJsaW5nIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNlbmRCdG4iLCJ2YWxpZCIsImVsZW1lbnRzIiwibmFtZSIsInBob25lIiwiY29tbWVudCIsInN0cmVldCIsImhvdXNlIiwiY29ycHVzIiwiYXBhcnRtZW50IiwiZmxvb3IiLCJ0byIsImFqYXgiLCJ1cmwiLCJtZXRob2QiLCJkYXRhIiwidmFsIiwic3VjY2VzcyIsInRleHQiLCJtZXNzYWdlIiwiZmFuY3lib3giLCJvcGVuIiwic3JjIiwiZXJyb3IiLCJjbG9zZSIsInZpZGVvIiwicGxheSIsImR1cmF0aW9uQ29udHJvbCIsInNvdW5kQ29udHJvbCIsImludGVydmFsSWQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiY2hhbmdlU291bmQiLCJ2YWx1ZSIsIm1pbiIsIm1heCIsIk1hdGgiLCJyb3VuZCIsImR1cmF0aW9uIiwic2V0VmlkZW9EdXJhdGlvbiIsInRvZ2dsZSIsInBhdXNlZCIsInNldEludGVydmFsIiwidXBkYXRlRHVyYXRpb24iLCJwYXVzZSIsImNsZWFySW50ZXJ2YWwiLCJjdXJyZW50VGltZSIsInZvbHVtZSJdLCJtYXBwaW5ncyI6IkFBQUEsQ0FBQSxXQUNBLElBQUFBLEVBQUFDLFNBQUFDLGNBQUEsU0FBQSxFQUNBQyxFQUFBRixTQUFBQyxjQUFBLFNBQUEsRUFDQUUsRUFBQUgsU0FBQUMsY0FBQSxRQUFBLEVBRUFGLEVBQUFLLGlCQUFBLFFBQUEsU0FBQUMsR0FDQUgsRUFBQUksTUFBQUMsUUFBQSxRQUNBTCxFQUFBSSxNQUFBRSxPQUFBLElBQ0FOLEVBQUFJLE1BQUFHLFNBQUEsUUFDQSxDQUFBLEVBRUFOLEVBQUFDLGlCQUFBLFFBQUEsU0FBQUMsR0FDQUgsRUFBQUksTUFBQUMsUUFBQSxNQUNBLENBQUEsRUFDQUwsRUFBQUUsaUJBQUEsUUFBQSxJQUNBTSxFQUFBQyxlQUFBLEVBRUFELEVBQUFFLE9BQUFDLFVBQUFDLFNBQUEsY0FBQSxJQUNBWixFQUFBSSxNQUFBQyxRQUFBLE9BRUEsQ0FBQSxDQUVBLEVBQUEsRUN0QkEsV0FDQSxNQXVCQVEsRUFBQSxJQUNBLElBQUFDLEVBQUFDLEVBQUFDLEtBQUEsZ0JBQUEsRUFDQUMsRUFBQUgsRUFBQUUsS0FBQSxzQkFBQSxFQUVBRSxHQTNCQUgsSUFDQUksSUFBQUMsRUFBQSxJQUNBLElBQUFDLEVBQUFDLEVBQUFDLE1BQUEsRUFBQUgsTUFBQSxFQUVBSSxFQURBVCxFQUFBVSxRQUFBLGVBQUEsRUFDQVQsS0FBQSxtQkFBQSxFQUNBVSxFQUFBRixFQUFBSixNQUFBLEVBQUFJLEVBQUFHLE9BSUFDLEdBRkFDLFFBQUFDLElBQUFKLENBQUEsRUFFQUgsT0FBQVEsV0FBQSxvQkFBQSxFQUFBQyxT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QUNBLEVBQUEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe1xyXG4gIHZhciBidXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1cmdlclwiKTtcclxuICB2YXIgaGlkZGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oaWRkZW5cIik7XHJcbiAgdmFyIGNsb3NlQ3Jvc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNyb3NzXCIpO1xyXG4gIFxyXG4gIGJ1cmdlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBoaWRkZW4uc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICAgIGhpZGRlbi5zdHlsZS56SW5kZXggPSBcIjFcIjtcclxuICAgIGhpZGRlbi5zdHlsZS5vdmVyZmxvdz1cImhpZGRlblwiO1xyXG4gIH0pO1xyXG4gIFxyXG4gIGNsb3NlQ3Jvc3MuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgaGlkZGVuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICB9KTtcclxuICBoaWRkZW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgaWYgKGUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnaGlkZGVuX19saW5rJykpIHtcclxuICAgICAgaGlkZGVuLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH1cclxuICB9KVxyXG5cclxufSkoKTsiLCIoZnVuY3Rpb24oKXtcclxuICBjb25zdCBtZXN1cmVXaWR0aCA9IGl0ZW0gPT57XHJcbiAgICBsZXQgd2lkdGggPSA1MjQ7XHJcbiAgICBjb25zdCBzY3JlZW5XaWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xyXG4gICAgY29uc3QgY29udGFpbmVyID0gaXRlbS5jbG9zZXN0KCcubWVudV9fYWNjb3JkJyk7XHJcbiAgICBjb25zdCB0aXRsZXNCbG9ja3MgPWNvbnRhaW5lci5maW5kKCcubWVudV9faXRlbS10aXRsZScpO1xyXG4gICAgY29uc3QgdGl0bGVXaWR0aCA9IHRpdGxlc0Jsb2Nrcy53aWR0aCgpICogdGl0bGVzQmxvY2tzLmxlbmd0aDsgXHJcbiAgXHJcbiAgICBjb25zb2xlLmxvZyh0aXRsZVdpZHRoKTtcclxuICBcclxuICAgIGNvbnN0IGlzVGFibGV0ID0gd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDcyMHB4KScpLm1hdGNoZXM7XHJcbiAgICBjb25zdCBpc1Bob25lID0gd2luZG93Lm1hdGNoTWVkaWEoJyhtYXgtd2lkdGg6IDQ4MHB4KScpLm1hdGNoZXM7XHJcbiAgXHJcbiAgICBpZiAoaXNUYWJsZXQpe1xyXG4gICAgICB3aWR0aCA9IHNjcmVlbldpZHRoIC0gdGl0bGVXaWR0aDtcclxuICAgIH1cclxuICBcclxuICAgIGlmKGlzUGhvbmUpe1xyXG4gICAgICB3aWR0aCA9IHNjcmVlbldpZHRoIC0gdGl0bGVzQmxvY2tzLndpZHRoKClcclxuICAgIH1cclxuICAgIHJldHVybiB3aWR0aDtcclxuICBcclxuICB9XHJcbiAgXHJcbiAgY29uc3QgaXRlbU9wZW4gPSAoaXRlbSkgPT4ge1xyXG4gICAgY29uc3QgaXRlbUNvbnRlbnQgPSBpdGVtLmZpbmQoJy5tZW51X19jb250ZW50Jyk7XHJcbiAgICBjb25zdCBjb250ZW50VGV4dEJveCA9IGl0ZW1Db250ZW50LmZpbmQoJy5tZW51X19jb250ZW50LXV0ZXJvJyk7XHJcbiAgXHJcbiAgICBjb25zdCByZXFXaWR0aCA9IG1lc3VyZVdpZHRoKGl0ZW0pO1xyXG4gICAgaXRlbS5hZGRDbGFzcygnbWVudV9faXRlbS0tYWN0aXZlJyk7XHJcbiAgICBpdGVtQ29udGVudC53aWR0aChyZXFXaWR0aCk7XHJcbiAgICBjb250ZW50VGV4dEJveC53aWR0aChyZXFXaWR0aCk7XHJcbiAgfTtcclxuICBcclxuICBjb25zdCBjbG9zZUV2ZXJ5SXRlbSA9IChjb250YWluZXIpID0+IHtcclxuICAgIGNvbnN0IG1lbnVJdGVtcyA9IGNvbnRhaW5lci5maW5kKCcubWVudV9faXRlbScpO1xyXG4gICAgY29uc3QgaXRlbXNDb250ZW50ID0gbWVudUl0ZW1zLmZpbmQoJy5tZW51X19jb250ZW50Jyk7XHJcbiAgXHJcbiAgICBtZW51SXRlbXMucmVtb3ZlQ2xhc3MoJ21lbnVfX2l0ZW0tLWFjdGl2ZScpO1xyXG4gICAgaXRlbXNDb250ZW50LndpZHRoKDApO1xyXG4gIH07XHJcbiAgXHJcbiAgJChcIi5tZW51X19pdGVtLXRpdGxlXCIpLm9uKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgbGV0ICR0aGlzID0gJChldmVudC5jdXJyZW50VGFyZ2V0KTtcclxuICAgIGxldCBpdGVtID0gJHRoaXMuY2xvc2VzdChcIi5tZW51X19pdGVtXCIpO1xyXG4gICAgbGV0IGl0ZW1PcGVuZWQgPSBpdGVtLmhhc0NsYXNzKCdtZW51X19pdGVtLS1hY3RpdmUnKTtcclxuICAgIGNvbnN0IGNvbnRhaW5lciA9ICR0aGlzLmNsb3Nlc3QoJy5tZW51X19hY2NvcmQnKVxyXG4gIFxyXG4gICAgaWYgKGl0ZW1PcGVuZWQpIHtcclxuICAgICAgY2xvc2VFdmVyeUl0ZW0oY29udGFpbmVyKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNsb3NlRXZlcnlJdGVtKGNvbnRhaW5lcik7XHJcbiAgICAgIGl0ZW1PcGVuKGl0ZW0pO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIFxyXG59KSgpOyIsIihmdW5jdGlvbigpe1xyXG4gIGxldCBteU1hcDtcclxuXHJcbmNvbnN0IGluaXQgPSAoKSA9PiB7XHJcbiAgbXlNYXAgPSBuZXcgeW1hcHMuTWFwKFwibWFwLWJsb2NrXCIsIHtcclxuICAgIGNlbnRlcjogWzU0LjUwOTgwNSwgMzYuMjc0NDc4XSxcclxuICAgIHpvb206IDE2LjkyLFxyXG4gICAgY29udHJvbHM6IFtdLFxyXG4gICAgXHJcbiAgfSk7XHJcblxyXG4gIGNvbnN0IGNvb3JkcyA9IFtcclxuICAgIFs1NC41MDk1MjUsIDM2LjI3Mzc4Nl0sXHJcbiAgXTtcclxuXHJcbiAgY29uc3QgbXlDb2xsZWN0aW9uID0gbmV3IHltYXBzLkdlb09iamVjdENvbGxlY3Rpb24oXHJcbiAgICB7fSxcclxuICAgIHtcclxuICAgICAgdHlwZTogXCJQb2ludFwiLFxyXG4gICAgICBkcmFnZ2FibGU6IGZhbHNlLFxyXG4gICAgICBpY29uTGF5b3V0OiBcImRlZmF1bHQjaW1hZ2VcIixcclxuICAgICAgaWNvbkltYWdlU2l6ZTogWzMwLCAzOF0sXHJcbiAgICAgIFxyXG4gICAgLy8gICBpY29uSW1hZ2VPZmZzZXQ6IFstMywgLTQyXSxcclxuICAgIH1cclxuICApO1xyXG5cclxuICBmb3IgKHZhciBpID0gMDsgaSA8IGNvb3Jkcy5sZW5ndGg7IGkrKykge1xyXG4gICAgbXlDb2xsZWN0aW9uLmFkZChuZXcgeW1hcHMuUGxhY2VtYXJrKGNvb3Jkc1tpXSkpO1xyXG4gIH1cclxuXHJcbiAgbXlNYXAuZ2VvT2JqZWN0cy5hZGQobXlDb2xsZWN0aW9uKTtcclxuICBteU1hcC5iZWhhdmlvcnMuZGlzYWJsZSgnc2Nyb2xsWm9vbScpO1xyXG59O1xyXG5cclxueW1hcHMucmVhZHkoaW5pdCk7XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpe1xyXG4gICAgY29uc3QgZmluZEJsb2NrID0gKGFsaWFzKT0+e1xyXG4gICAgICAgIHJldHVybiAkKCcucmV2aWV3c19fY29udGVudCcpLmZpbHRlcigobmR4LCBpdGVtKT0+e1xyXG4gICAgICAgICAgICAgcmV0dXJuICQoaXRlbSkuYXR0cignZGF0YS1vcGVuLXdpdGgnKT09YWxpYXM7XHJcbiAgICAgICAgIH0pXHJcbiAgICAgfVxyXG4gICAgIFxyXG4gICAgIFxyXG4gICAgICQoJy5yZXZpZXdzX191c2VyJykub24oJ2NsaWNrJywgKGV2ZW50KT0+e1xyXG4gICAgICAgICBsZXQgJHRoaXMgPSAkKGV2ZW50LmN1cnJlbnRUYXJnZXQpO1xyXG4gICAgICAgICBsZXQgdGFyZ2V0ID0gJHRoaXMuYXR0cignZGF0YS1vcGVuJyk7XHJcbiAgICAgICAgIGxldCBzaG93SXRlbSA9IGZpbmRCbG9jayh0YXJnZXQpO1xyXG4gICAgICAgICAkdGhpcy5hZGRDbGFzcygndXNlci1hY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCd1c2VyLWFjdGl2ZScpO1xyXG4gICAgICAgICBzaG93SXRlbS5hZGRDbGFzcygnYWN0aXZlJykuc2libGluZ3MoKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgfSlcclxufSkoKTsiLCIoZnVuY3Rpb24oKXtcclxuICBjb25zdCBzZWN0aW9ucyA9ICQoXCIuc2VjdGlvblwiKTtcclxuY29uc3QgZGlzcGxheSA9ICQoXCIubWFpbmNvbnRlbnRcIik7XHJcbnNlY3Rpb25zLmZpcnN0KCkuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbmNvbnN0IG1vYmlsZURldGVjdCA9IG5ldyBNb2JpbGVEZXRlY3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG5jb25zdCBpc01vYmlsZSA9IG1vYmlsZURldGVjdC5tb2JpbGUoKTtcclxuXHJcbmxldCBpblNjcm9sbCA9IGZhbHNlO1xyXG5cclxuXHJcblxyXG5jb25zdCBwZXJmb3JtVHJhbnNpdGlvbiA9IChzZWN0aW9uRXEpID0+IHtcclxuICAgIGlmKGluU2Nyb2xsPT09ZmFsc2Upe1xyXG4gICAgICAgIGluU2Nyb2xsPXRydWU7XHJcbiAgICAgICAgY29uc3QgcG9zaXRpb24gPSBzZWN0aW9uRXEgKiAtMTAwO1xyXG4gICAgICAgIGRpc3BsYXkuY3NzKHtcclxuICAgICAgICAgIHRyYW5zZm9ybTogYHRyYW5zbGF0ZVkoJHtwb3NpdGlvbn0lKWAsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgc2VjdGlvbnMuZXEoc2VjdGlvbkVxKS5hZGRDbGFzcyhcImFjdGl2ZVwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICQoJy5maXhlZF9faXRlbScpLmVxKHNlY3Rpb25FcSkuYWRkQ2xhc3MoJ2ZpeGVkX19pdGVtLS1hY3RpdmUnKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCdmaXhlZF9faXRlbS0tYWN0aXZlJyk7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKT0+e1xyXG4gICAgICAgICAgICBpblNjcm9sbD1mYWxzZTtcclxuICAgICAgICB9LDEzMDApXHJcbiAgICB9XHJcbn07XHJcblxyXG5jb25zdCBzY3JvbGxWaWV3cG9ydCA9IChkaXJlY3Rpb24pID0+IHtcclxuICBjb25zdCBhY3RpdmVTZWN0aW9uID0gc2VjdGlvbnMuZmlsdGVyKFwiLmFjdGl2ZVwiKTtcclxuICBjb25zdCBuZXh0U2VjdGlvbiA9IGFjdGl2ZVNlY3Rpb24ubmV4dCgpO1xyXG4gIGNvbnN0IHByZXZTZWN0aW9uID0gYWN0aXZlU2VjdGlvbi5wcmV2KCk7XHJcblxyXG4gIGlmIChkaXJlY3Rpb24gPT09IFwibmV4dFwiICYmIG5leHRTZWN0aW9uLmxlbmd0aCkge1xyXG4gICAgICBwZXJmb3JtVHJhbnNpdGlvbihuZXh0U2VjdGlvbi5pbmRleCgpKTtcclxuICB9XHJcbiAgaWYgKGRpcmVjdGlvbiA9PT0gXCJwcmV2XCIgJiYgcHJldlNlY3Rpb24ubGVuZ3RoKSB7XHJcbiAgICAgICAgcGVyZm9ybVRyYW5zaXRpb24ocHJldlNlY3Rpb24uaW5kZXgoKSk7XHJcbiAgICB9XHJcbn07XHJcblxyXG4kKHdpbmRvdykub24oXCJ3aGVlbFwiLCAoZXZlbnQpID0+IHtcclxuICBjb25zdCBkZWx0YVkgPSBldmVudC5vcmlnaW5hbEV2ZW50LmRlbHRhWTtcclxuICBpZiAoZGVsdGFZID4gMCkge1xyXG4gICAgLy9uZXh0XHJcbiAgICBzY3JvbGxWaWV3cG9ydChcIm5leHRcIik7XHJcbiAgfVxyXG4gIGlmIChkZWx0YVkgPCAwKSB7XHJcbiAgICAvL3ByZXZcclxuICAgIHNjcm9sbFZpZXdwb3J0KFwicHJldlwiKTtcclxuICB9XHJcblxyXG59KTtcclxuXHJcbiQod2luZG93KS5vbigna2V5ZG93bicsIGV2ZW50ID0+e1xyXG4gICAgY29uc29sZS5sb2coZXZlbnQua2V5Q29kZSlcclxuICAgIGxldCB0YWdOYW1lID0gZXZlbnQudGFyZ2V0LnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcclxuICAgIGlmKHRhZ05hbWUhPT0naW5wdXQnICYmIHRhZ05hbWUhPT0ndGV4dGFyZWEnKXtcclxuICAgICAgICBzd2l0Y2ggKGV2ZW50LmtleUNvZGUpIHtcclxuICAgICAgICAgICAgY2FzZSAzODpcclxuICAgICAgICAgICAgc2Nyb2xsVmlld3BvcnQoXCJwcmV2XCIpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgIGNhc2UgNDA6XHJcbiAgICAgICAgICAgIHNjcm9sbFZpZXdwb3J0KFwibmV4dFwiKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSlcclxuXHJcblxyXG5cclxuXHJcbiQoJ1tkYXRhLXNjcm9sbC10b10nKS5vbignY2xpY2snLCBldmVudD0+e1xyXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0ICR0aGlzID0gJChldmVudC5jdXJyZW50VGFyZ2V0KTtcclxuICAgIGNvbnN0IHRhcmdldCA9ICR0aGlzLmF0dHIoJ2RhdGEtc2Nyb2xsLXRvJyk7XHJcbiAgICBjb25zdCByZXFTZWN0aW9uID0gJChgW2RhdGEtc2VjdGlvbi1pZD0ke3RhcmdldH1dYCk7XHJcbiAgICBjb25zb2xlLmxvZyhyZXFTZWN0aW9uLmluZGV4KCkpO1xyXG4gICAgcGVyZm9ybVRyYW5zaXRpb24ocmVxU2VjdGlvbi5pbmRleCgpKTtcclxufSlcclxuXHJcbiQoJy53cmFwcGVyJykub24oJ3RvdWNoTW92ZScsIGV2ZW50ID0+IGV2ZW50LnByZXZlbnREZWZhdWx0KCkpO1xyXG5cclxuaWYgKGlzTW9iaWxlKSB7XHJcbiAgXHJcbiAgJChcImJvZHlcIikuc3dpcGUoe1xyXG4gICAgc3dpcGU6IGZ1bmN0aW9uIChldmVudCwgZGlyZWN0aW9uKSB7XHJcbiAgICAgIGlmIChkaXJlY3Rpb24gPT09ICd1cCcpIHtcclxuICAgICAgICBzY3JvbGxWaWV3cG9ydCgnbmV4dCcpXHJcbiAgICAgIH1cclxuICAgICAgaWYgKGRpcmVjdGlvbiA9PT0gJ2Rvd24nKSB7XHJcbiAgICAgICAgc2Nyb2xsVmlld3BvcnQoJ3ByZXYnKVxyXG4gICAgICB9XHJcblxyXG4gICAgfVxyXG4gIH0pO1xyXG59XHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XHJcbiAgICBjb25zdCBzbGlkZXIgPSAkKFwiLnByb2R1Y3RzX19pdGVtc1wiKS5ieFNsaWRlcih7XHJcbiAgICAgICAgcGFnZXI6IGZhbHNlLFxyXG4gICAgICAgIGNvbnRyb2xzOiBmYWxzZVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgICQoJy5wcm9kdWN0c19fY29udHJvbC0tbGVmdCcpLmNsaWNrKGU9PntcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgc2xpZGVyLmdvVG9QcmV2U2xpZGUoKTtcclxuICAgIH0pXHJcbiAgICBcclxuICAgIFxyXG4gICAgJCgnLnByb2R1Y3RzX19jb250cm9sLS1yaWdodCcpLmNsaWNrKGU9PntcclxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgc2xpZGVyLmdvVG9OZXh0U2xpZGUoKTtcclxuICAgIH0pXHJcbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XHJcbiAgICBjb25zdCBpc09wZW4gPSBpdGVtID0+e1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9ICQoaXRlbSkuY2xvc2VzdCgnLnRlYW1fX2l0ZW0nKTtcclxuICAgICAgICBjb25zdCBkcm9wRWxlbSA9ICQoY29udGFpbmVyKS5maW5kKCcudGVhbV9faXRlbS1kcm9wJyk7IFxyXG4gICAgICAgIGNvbnN0IGRyb3BDb250ZW50ID0gJChjb250YWluZXIpLmZpbmQoJy50ZWFtX19pdGVtLWNvbnRlbnQnKTtcclxuICAgICAgICBjb25zdCBjdXJIZWlnaHQgPSAkKGRyb3BDb250ZW50KS5oZWlnaHQoKTtcclxuICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoJ2lzQWN0aXZlJyk7XHJcbiAgICAgICAgJChkcm9wRWxlbSkuaGVpZ2h0KGN1ckhlaWdodCk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIGNvbnN0IGNsb3NlQWxsID0gY29udGFpbmVyID0+e1xyXG4gICAgICAgIGNvbnN0IGFsbEJsb2NrcyA9ICQoY29udGFpbmVyKS5maW5kKCcudGVhbV9faXRlbS1kcm9wJyk7XHJcbiAgICAgICAgY29uc3QgaXRlbUNvbnRhaW5lciA9IGNvbnRhaW5lci5maW5kKCcudGVhbV9faXRlbScpO1xyXG4gICAgICAgIGl0ZW1Db250YWluZXIucmVtb3ZlQ2xhc3MoJ2lzQWN0aXZlJyk7XHJcbiAgICAgICAgJChhbGxCbG9ja3MpLmhlaWdodCgwKTtcclxuICAgICAgIFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAkKCcudGVhbV9faXRlbS10aXRsZScpLm9uKCdjbGljaycsIChldmVudCk9PntcclxuICAgICAgICBjb25zdCAkdGhpcyA9ICQoZXZlbnQuY3VycmVudFRhcmdldCk7XHJcbiAgICAgICAgY29uc3QgY2xvc2VTaWJsaW5ncyA9ICR0aGlzLmNsb3Nlc3QoJy50ZWFtX19pdGVtcycpO1xyXG4gICAgICAgIGNvbnN0IGVsZW1Db250YWluZXIgPSAkdGhpcy5jbG9zZXN0KCcudGVhbV9faXRlbScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmKGVsZW1Db250YWluZXIuaGFzQ2xhc3MoJ2lzQWN0aXZlJykpe1xyXG4gICAgICAgICAgICBjbG9zZUFsbChjbG9zZVNpYmxpbmdzKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgY2xvc2VBbGwoY2xvc2VTaWJsaW5ncyk7XHJcbiAgICAgICAgICAgIGlzT3BlbigkdGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuICAgIFxyXG59KSgpOyIsIihmdW5jdGlvbigpe1xyXG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybScpO1xyXG5cclxuc2VuZEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XHJcbiAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICBjb25zb2xlLmxvZygnZm9ybTEnLGZvcm0pXHJcbiAgaWYgKHZhbGlkYXRlRm9ybShmb3JtKSkge1xyXG4gICAgY29uc29sZS5sb2coXCLQvtC6XCIpO1xyXG5cclxuICAgIGNvbnN0IGZvcm0gPSAkKCcjZm9ybScpO1xyXG4gICAgY29uc3QgbmFtZSA9IGZvcm0uZmluZChcIltuYW1lID0gJ25hbWUnXVwiKTtcclxuICAgIGNvbnN0IHBob25lID0gZm9ybS5maW5kKFwiW25hbWUgPSAncGhvbmUnXVwiKTtcclxuICAgIGNvbnN0IHN0cmVldCA9IGZvcm0uZmluZChcIltuYW1lID0gJ3N0cmVldCddXCIpO1xyXG4gICAgY29uc3QgaG91c2UgPSBmb3JtLmZpbmQoXCJbbmFtZSA9ICdob3VzZSddXCIpO1xyXG4gICAgY29uc3QgY29ycHVzID0gZm9ybS5maW5kKFwiW25hbWUgPSAnY29ycHVzJ11cIik7XHJcbiAgICBjb25zdCBhcGFydG1lbnQgPSBmb3JtLmZpbmQoXCJbbmFtZSA9ICdhcGFydG1lbnQnXVwiKTtcclxuICAgIGNvbnN0IGZsb29yID0gZm9ybS5maW5kKFwiW25hbWUgPSAnZmxvb3InXVwiKTtcclxuICAgIGNvbnN0IHRvID0gZm9ybS5maW5kKFwiW25hbWU9J3RvJ11cIik7XHJcbiAgICBjb25zdCBjb21tZW50ID0gZm9ybS5maW5kKFwiW25hbWU9J2NvbW1lbnQnXVwiKTtcclxuXHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICB1cmw6IFwiaHR0cHM6Ly93ZWJkZXYtYXBpLmxvZnRzY2hvb2wuY29tL3NlbmRtYWlsXCIsXHJcbiAgICAgIG1ldGhvZDogXCJwb3N0XCIsXHJcbiAgICAgIGRhdGE6IHtcclxuICAgICAgICBuYW1lOiBuYW1lLnZhbCgpLFxyXG4gICAgICAgIHBob25lOiBwaG9uZS52YWwoKSxcclxuICAgICAgICBzdHJlZXQ6IHN0cmVldC52YWwoKSxcclxuICAgICAgICBob3VzZTogaG91c2UudmFsKCksXHJcbiAgICAgICAgY29ycHVzOiBjb3JwdXMudmFsKCksXHJcbiAgICAgICAgYXBhcnRtZW50OiBhcGFydG1lbnQudmFsKCksXHJcbiAgICAgICAgZmxvb3I6IGZsb29yLnZhbCgpLFxyXG4gICAgICAgIHRvOiB0by52YWwoKSxcclxuICAgICAgICBjb21tZW50OiBjb21tZW50LnZhbCgpXHJcbiAgICAgIH0sXHJcbiAgICAgIHN1Y2Nlc3M6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgJCgnLm1vZGFsX190ZXh0JykudGV4dChkYXRhLm1lc3NhZ2UpO1xyXG4gICAgICAgICQoJyNtb2RhbCcpLmNzcygnb3ZlcmZsb3cnLCdoaWRkZW4nKTtcclxuICAgICAgICAkLmZhbmN5Ym94Lm9wZW4oe1xyXG4gICAgICAgICAgc3JjOiBcIiNtb2RhbFwiLFxyXG4gICAgICAgICAgdHlwZTogXCJpbmxpbmVcIixcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgICAgZXJyb3I6IChkYXRhKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgJCgnLm1vZGFsX190ZXh0JykudGV4dCgn0J/RgNC+0LjQt9C+0YjQu9CwINC+0YjQuNCx0LrQsCwg0L/QvtC/0YDQvtCx0YPQudGC0LUg0L/QvtC30LbQtScpO1xyXG4gICAgICAgICQuZmFuY3lib3gub3Blbih7XHJcbiAgICAgICAgICBzcmM6IFwiI21vZGFsXCIsXHJcbiAgICAgICAgICB0eXBlOiBcImlubGluZVwiLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gdmFsaWRhdGVGb3JtKGZvcm0pIHtcclxuICBsZXQgdmFsaWQgPSB0cnVlO1xyXG5cclxuICBpZiAoIXZhbGlkYXRlRmllbGQoZm9ybS5lbGVtZW50cy5uYW1lKSkge1xyXG4gICAgdmFsaWQgPSBmYWxzZTtcclxuICB9XHJcbiAgaWYgKCF2YWxpZGF0ZUZpZWxkKGZvcm0uZWxlbWVudHMucGhvbmUpKSB7XHJcbiAgICB2YWxpZCA9IGZhbHNlO1xyXG4gIH1cclxuICBpZiAoIXZhbGlkYXRlRmllbGQoZm9ybS5lbGVtZW50cy5jb21tZW50KSl7XHJcbiAgICB2YWxpZD1mYWxzZTtcclxuICB9XHJcbiAgaWYgKCF2YWxpZGF0ZUZpZWxkKGZvcm0uZWxlbWVudHMuc3RyZWV0KSl7XHJcbiAgICB2YWxpZCA9IGZhbHNlO1xyXG59O1xyXG5pZiAoIXZhbGlkYXRlRmllbGQoZm9ybS5lbGVtZW50cy5ob3VzZSkpe1xyXG4gICAgdmFsaWQgPSBmYWxzZTtcclxufTtcclxuaWYgKCF2YWxpZGF0ZUZpZWxkKGZvcm0uZWxlbWVudHMuY29ycHVzKSl7XHJcbiAgICB2YWxpZCA9IGZhbHNlO1xyXG59O1xyXG5pZiAoIXZhbGlkYXRlRmllbGQoZm9ybS5lbGVtZW50cy5hcGFydG1lbnQpKXtcclxuICAgIHZhbGlkID0gZmFsc2U7XHJcbn07XHJcbmlmICghdmFsaWRhdGVGaWVsZChmb3JtLmVsZW1lbnRzLmZsb29yKSl7XHJcbiAgICB2YWxpZCA9IGZhbHNlO1xyXG59O1xyXG4gIHJldHVybiB2YWxpZDtcclxufVxyXG5cclxuZnVuY3Rpb24gdmFsaWRhdGVGaWVsZChmaWVsZCkge1xyXG4gIGlmICghZmllbGQuY2hlY2tWYWxpZGl0eSgpKSB7XHJcbiAgICBmaWVsZC5uZXh0RWxlbWVudFNpYmxpbmcudGV4dENvbnRlbnQgPSBmaWVsZC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9IGVsc2Uge1xyXG4gICAgZmllbGQubmV4dEVsZW1lbnRTaWJsaW5nLnRleHRDb250ZW50ID0gXCJcIjtcclxuICAgIHJldHVybiB0cnVlO1xyXG4gIH1cclxufVxyXG5cclxuXHJcblxyXG4kKCcuYXBwLWNsb3NlLW1vZGFsJykub24oJ2NsaWNrJywgKCkgPT4ge1xyXG4gICQuZmFuY3lib3guY2xvc2UoKVxyXG59KTtcclxuXHJcblxyXG4vLyAkKFwiI2Zvcm1cIikub24oXCJzdWJtaXRcIiwgKGV2ZW50KSA9PiB7XHJcbi8vICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbi8vICAgY29uc3QgZm9ybSA9ICQoZXZlbnQuY3VycmVudFRhcmdldCk7XHJcbi8vICAgY29uc3QgbmFtZSA9IGZvcm0uZmluZChcIltuYW1lID0gJ25hbWUnXVwiKTtcclxuLy8gICBjb25zdCBwaG9uZSA9IGZvcm0uZmluZChcIltuYW1lID0gJ3Bob25lJ11cIik7XHJcbi8vICAgY29uc3Qgc3RyZWV0ID0gZm9ybS5maW5kKFwiW25hbWUgPSAnc3RyZWV0J11cIik7XHJcbi8vICAgY29uc3QgaG91c2UgPSBmb3JtLmZpbmQoXCJbbmFtZSA9ICdob3VzZSddXCIpO1xyXG4vLyAgIGNvbnN0IGNvcnB1cyA9IGZvcm0uZmluZChcIltuYW1lID0gJ2NvcnB1cyddXCIpO1xyXG4vLyAgIGNvbnN0IGFwYXJ0bWVudCA9IGZvcm0uZmluZChcIltuYW1lID0gJ2FwYXJ0bWVudCddXCIpO1xyXG4vLyAgIGNvbnN0IGZsb29yID0gZm9ybS5maW5kKFwiW25hbWUgPSAnZmxvb3InXVwiKTtcclxuLy8gICBjb25zdCB0byA9IGZvcm0uZmluZChcIltuYW1lPSd0byddXCIpO1xyXG5cclxuLy8gICAkLmFqYXgoe1xyXG4vLyAgICAgdXJsOiBcImh0dHBzOi8vd2ViZGV2LWFwaS5sb2Z0c2Nob29sLmNvbS9zZW5kbWFpbFwiLFxyXG4vLyAgICAgbWV0aG9kOiBcInBvc3RcIixcclxuLy8gICAgIGRhdGE6IHtcclxuLy8gICAgICAgbmFtZTogbmFtZS52YWwoKSxcclxuLy8gICAgICAgcGhvbmU6IHBob25lLnZhbCgpLFxyXG4vLyAgICAgICBzdHJlZXQ6IHN0cmVldC52YWwoKSxcclxuLy8gICAgICAgaG91c2U6IGhvdXNlLnZhbCgpLFxyXG4vLyAgICAgICBjb3JwdXM6IGNvcnB1cy52YWwoKSxcclxuLy8gICAgICAgYXBhcnRtZW50OiBhcGFydG1lbnQudmFsKCksXHJcbi8vICAgICAgIGZsb29yOiBmbG9vci52YWwoKSxcclxuLy8gICAgICAgdG86IHRvLnZhbCgpLFxyXG4vLyAgICAgfSxcclxuLy8gICB9KTtcclxuLy8gfSk7XHJcblxyXG59KSgpOyIsIihmdW5jdGlvbigpe1xyXG4gIGxldCB2aWRlbztcclxubGV0IHBsYXk7XHJcbmxldCBkdXJhdGlvbkNvbnRyb2w7XHJcbmxldCBzb3VuZENvbnRyb2w7XHJcbmxldCBpbnRlcnZhbElkO1xyXG5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgKGV2ZW50KSA9PiB7XHJcbiAgdmlkZW8gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInZpZGVvXCIpO1xyXG4gIGR1cmF0aW9uQ29udHJvbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZHVyYXRpb25MZXZlbFwiKTtcclxuICBzb3VuZENvbnRyb2wgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNvdW5kTGV2ZWxcIik7XHJcbiAgcGxheSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucGxheVwiKTtcclxuXHJcbiAgc291bmRDb250cm9sLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2hhbmdlU291bmQpO1xyXG4gIHNvdW5kQ29udHJvbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgY2hhbmdlU291bmQpO1xyXG5cclxuICBkdXJhdGlvbkNvbnRyb2wudmFsdWUgPSAwO1xyXG4gIGR1cmF0aW9uQ29udHJvbC5taW49MDtcclxuICBkdXJhdGlvbkNvbnRyb2wubWF4ID0gTWF0aC5yb3VuZCh2aWRlby5kdXJhdGlvbik7XHJcblxyXG4gIFxyXG4gIGR1cmF0aW9uQ29udHJvbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHNldFZpZGVvRHVyYXRpb24pO1xyXG5cclxuICBmdW5jdGlvbiBtb3VzZVVwKCl7XHJcbiAgICBzZXRWaWRlb0R1cmF0aW9uKCk7XHJcbiAgICB2aWRlby5wbGF5KCk7XHJcbiAgfVxyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpPHBsYXkubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgIHBsYXlbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpPT57XHJcblxyXG4gICAgICAgICAgbGV0IHBsYXlJbWcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucGxheS1idG4nKTtcclxuICAgICAgICAgIHBsYXlJbWcuY2xhc3NMaXN0LnRvZ2dsZSgncGxheS1idG4tLWFjdGl2ZScpO1xyXG5cclxuXHJcblxyXG4gICAgICAgICAgaWYgKHZpZGVvLnBhdXNlZCkge1xyXG4gICAgICAgICAgICB2aWRlby5wbGF5KCk7XHJcbiAgICAgICAgICAgIGludGVydmFsSWQgPSBzZXRJbnRlcnZhbCh1cGRhdGVEdXJhdGlvbiwxMDAwLzY2KVxyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmlkZW8ucGF1c2UoKTtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICApfVxyXG5cclxuICAgIGZ1bmN0aW9uIHVwZGF0ZUR1cmF0aW9uKCl7XHJcbiAgICAgIGR1cmF0aW9uQ29udHJvbC52YWx1ZSA9IHZpZGVvLmN1cnJlbnRUaW1lO1xyXG4gICAgfSBcclxuXHJcbiAgICBsZXQgbWljQ29udHJvbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtaWNMZXZlbCcpO1xyXG4gICAgbWljQ29udHJvbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNvdW5kT2ZmKTtcclxuXHJcbiAgICBmdW5jdGlvbiBzb3VuZE9mZigpe1xyXG4gICAgICBpZih2aWRlby52b2x1bWUgPT09IDApe1xyXG4gICAgICAgIHZpZGVvLnZvbHVtZSA9IHNvdW5kQ29udHJvbDsgXHJcbiAgICAgICAgc291bmRDb250cm9sLnZhbHVlID0gc291bmRDb250cm9sICoxMDtcclxuICAgICAgfVxyXG4gICAgICBlbHNle1xyXG4gICAgICAgIHNvdW5kQ29udHJvbD12aWRlby52b2x1bWU7XHJcbiAgICAgICAgdmlkZW8udm9sdW1lID0gMDtcclxuICAgICAgICBzb3VuZENvbnRyb2wudmFsdWU9MDtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHN0b3BJbnRlcnZhbCgpe1xyXG4gICAgICB2aWRlby5wYXVzZSgpO1xyXG4gICAgICBjbGVhckludGVydmFsKGludGVydmFsSWQpO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHNldFZpZGVvRHVyYXRpb24oKXtcclxuICAgICAgLy8gaWYodmlkZW8ucGF1c2VkKXtcclxuICAgICAgLy8gICB2aWRlby5wbGF5KCk7XHJcblxyXG4gICAgICAvLyB9ZWxzZXtcclxuICAgICAgLy8gICB2aWRlby5wYXVzZSgpO1xyXG4gICAgICAvLyB9XHJcblxyXG4gICAgICB2aWRlby5jdXJyZW50VGltZSA9IGR1cmF0aW9uQ29udHJvbC52YWx1ZTtcclxuICAgICAgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKHVwZGF0ZUR1cmF0aW9uLCAxMDAwLzY2KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjaGFuZ2VTb3VuZCgpe1xyXG4gICAgICB2aWRlby52b2x1bWUgPSBzb3VuZENvbnRyb2wudmFsdWUvMTA7XHJcbiAgICB9XHJcblxyXG59KTtcclxufSkoKTsiXX0=
